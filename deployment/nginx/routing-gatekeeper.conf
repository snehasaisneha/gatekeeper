# =============================================================================
# Routing: Gatekeeper (runs on Routing server)
# =============================================================================
# Public endpoint for auth.example.com â†’ proxies to Gatekeeper server.
# NO auth_request - must be publicly accessible for login.
# No HTTPS - run certbot after nginx -t passes.
# =============================================================================

server {
    listen 80;
    server_name auth.example.com;  # EDIT: Your auth domain

    location / {
        proxy_pass http://10.0.0.10:8000;  # EDIT: Gatekeeper server IP:port
        proxy_set_header Host $host;
        proxy_set_header X-Real-IP $remote_addr;
        proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;
        proxy_set_header X-Forwarded-Proto $scheme;
    }
}
